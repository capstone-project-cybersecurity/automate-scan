pipeline {

    agent any

    triggers {
        cron('H/1 * * * *')
    }

    stages {

        stage('Running scan') {

            options {
                timeout(time: 10, unit: 'MINUTES')
            }

            steps {
                git 'https://github.com/capstone-project-cybersecurity/automate-scan.git'
                sh 'docker build -t automate-scan .'
                sh 'docker run automate-scan || exit 1'
            }
        }
    }
            post {
                success {
                    sh 'echo "All good!!!"'
                        slackSend (
                        color: '#36a64f',
                        message: "Build ${env.JOB_NAME} ${env.BUILD_NUMBER} is complete: ${currentBuild.currentResult}",
                        channel: '#general',
                    )
                }
                failure {
                    sh 'echo "I failed :("'
                          slackSend (
                          color: '#d00000',
                          message: "Build ${env.JOB_NAME} ${env.BUILD_NUMBER} has failed!",
                          channel: '#General',
                    )
                }
            }
}