pipeline {

    agent any

    // ToDo later
    //triggers {
    //    cron('H */4 * * 1-5')
    //}

    stages {

        stage('Running scan') {

            options {
                timeout(time: 10, unit: 'MINUTES')
            }

            steps {
                git 'https://github.com/capstone-project-cybersecurity/automate-scan.git'
                sh 'docker build -t automate-scan .'
                sh 'docker run automate-scan'
            }
        }
    }
            post {
                success {
                    sh 'echo "All good!!!"'
                       emailext (
                       to: 'daniel.gomez.amaran@gmail.com',
                       subject: 'Jenkins Build Results',
                       body: 'The build has completed.\n\nStatus: ${currentBuild.currentResult}',
                       )
                }
                failure {
                    sh 'echo "I failed :("'
                }
            }
}